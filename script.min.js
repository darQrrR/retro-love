"use strict";const input=document.querySelector(".input"),output=document.querySelector(".output"),commands=[{cmd:"print",para:1,func:promptPrint},{cmd:"goto",para:1,func:promptGoto},{cmd:"exit",para:0,func:promptExit},{cmd:"clr",para:0,func:promptClr},{cmd:"run",para:0,func:promptRun}];let promptStorage=[];output.textContent="Ready.\n",input.addEventListener("input",(()=>{const t=input.value.length?input.value.length:1;input.setAttribute("size",t),input.style.width=0===input.value.length?"0px":"auto"})),input.addEventListener("blur",(()=>{input.focus()})),input.addEventListener("keydown",(t=>{if("Enter"===t.key){const t=input.value.toLowerCase().trim();output.textContent+=`${t}\n\n`;const n=t.match(/^\d+\s/),e=!!n?.[0],p=e?n[0].trim():null,u=e?t.slice(p.length+1):t,o=validatePrompt(u);if(!o.valid)return output.textContent+="?Syntax Error\n",void resetInput();if(e){const{fn:t,para:n}=o;storePrompt(p,{fn:t,para:n})}e||(console.log("executing"),o.fn(o.para)),resetInput()}}));const validatePrompt=t=>{const n=t.indexOf(" ");let e,p;-1!==n?(e=t.slice(0,n),p=-1!==n?t.slice(n+1):null):(e=t,p=null);const u=commands.find((t=>t.cmd===e));if(!u)return!1;return{valid:!!(u.para&&p||!u.para&&!p),fn:u.func,para:p}},storePrompt=(t,n)=>{promptStorage[t]=n},resetInput=()=>{output.textContent+="Ready.\n",output.style.height=output.scrollHeight-24+"px",input.value="",input.style.width="0px"},clog=t=>{output.textContent+=`${t}\n`,output.style.height=output.scrollHeight-24+"px"};function promptRun(){promptStorage.length&&promptStorage.forEach(((t,n)=>{t.fn(t.para)}))}function promptPrint(t){t&&(output.textContent+=`${t}\n`,output.style.height=output.scrollHeight-24+"px")}function promptGoto(t){}function promptExit(){}function promptClr(){output.textContent="",output.style.height="0px",input.value="",input.style.width="0px"}